# ============================================================================
# Resonance IM System - 环境变量配置示例
# ============================================================================
# 复制为 .env 后根据实际部署修改

# ============================================================================
# 部署模式配置
# ============================================================================
# DEPLOY_ENV=local          # 本地开发：暴露端口到 127.0.0.1，不使用 Caddy
# DEPLOY_ENV=production     # 生产环境：不暴露端口，使用宿主机 Caddy 反向代理

# Docker 镜像配置
# RESONANCE_IMAGE=ceyewan/resonance:v0.1  # 生产环境使用的镜像
# CGO_ENABLED=0                            # 构建时是否启用 CGO

# Caddy 域名配置（生产环境）
# CADDY_GATEWAY_DOMAIN=im-api.ceyewan.xyz
# CADDY_WEB_DOMAIN=chat.ceyewan.xyz

# 端口绑定配置（本地开发）
# GATEWAY_PORT_BINDING=127.0.0.1:8080:8080
# WEB_PORT_BINDING=127.0.0.1:4173:4173

# ============================================================================
# 服务标识（用于 docker compose hostname & 服务发现）
# ============================================================================
RESONANCE_GATEWAY_SERVICE_NAME=gateway-service
RESONANCE_LOGIC_SERVICE_NAME=logic-service
RESONANCE_TASK_SERVICE_NAME=task-service

# 注意：在 docker compose 环境下，HOSTNAME 会被自动注入。
# 但为了支持水平扩展和明确的服务发现，建议显式传递 HOSTNAME。
# 代码中已实现回退逻辑：优先读取 RESONANCE_SERVICE_HOST，其次读取 HOSTNAME（无需前缀），最后默认为 localhost。
RESONANCE_GATEWAY_HOSTNAME=gateway-service-001
RESONANCE_LOGIC_HOSTNAME=logic-service-001
RESONANCE_TASK_HOSTNAME=task-service-001

# ============================================================================
# 网络端口（docker compose & config 覆盖）
# ============================================================================
RESONANCE_GATEWAY_HTTP_HOST=localhost
RESONANCE_GATEWAY_HTTP_PORT=8080
RESONANCE_GATEWAY_GRPC_PORT=15091
RESONANCE_LOGIC_GRPC_PORT=15090
RESONANCE_WEB_HTTP_PORT=4173
RESONANCE_ETCD_PORT=2379
RESONANCE_DB_PORT=3306
RESONANCE_REDIS_PORT=6379
RESONANCE_NATS_PORT=4222

# ============================================================================
# 可选：RESONANCE_ENV=dev|prod（加载 config.{env}.yaml）
# ============================================================================
# RESONANCE_ENV=prod

# ============================================================================
# MySQL 配置（统一使用 RESONANCE_ 前缀）
# ============================================================================
# MySQL 容器初始化配置
RESONANCE_MYSQL_ROOT_PASSWORD=root123
RESONANCE_MYSQL_DATABASE=resonance
RESONANCE_MYSQL_USER=resonance
RESONANCE_MYSQL_PASSWORD=resonance123

# 业务代码访问配置（可选，覆盖 configs/*.yaml）
# 默认使用 configs/*.yaml 中的配置，本地开发无需设置
# Docker Compose 环境下，RESONANCE_MYSQL_HOST 会自动设置为 mysql
# RESONANCE_MYSQL_HOST=mysql
# RESONANCE_MYSQL_PORT=3306
# RESONANCE_MYSQL_USERNAME=resonance
# RESONANCE_MYSQL_PASSWORD=resonance123
# RESONANCE_MYSQL_DATABASE=resonance

# ============================================================================
# Redis / NATS / etcd 访问示例（如需覆盖 configs/*.yaml 可按需添加）
# ============================================================================
# RESONANCE_REDIS_ADDR=127.0.0.1:6379
# RESONANCE_NATS_URL=nats://127.0.0.1:4222
# RESONANCE_ETCD_ENDPOINTS=127.0.0.1:2379

# ============================================================================
# 服务注册发现配置
# ============================================================================
RESONANCE_REGISTRY_NAMESPACE=/resonance/services
RESONANCE_REGISTRY_TTL=30s
RESONANCE_REGISTRY_ENABLE_CACHE=true

# ============================================================================
# 日志配置
# ============================================================================
RESONANCE_LOG_FORMAT=json
RESONANCE_LOG_OUTPUT=stdout
RESONANCE_LOG_LEVEL=info

# ============================================================================
# Web 前端开发配置
# ============================================================================
RESONANCE_WEB_HOST=localhost
RESONANCE_WEB_PORT=5173
RESONANCE_WEB_BUILD_DIR=dist

# ============================================================================
# 认证配置示例
# ============================================================================
RESONANCE_JWT_SECRET=resonance_secret_key_with_length_32
