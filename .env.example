# ============================================================================
# Resonance IM System - 环境变量配置示例
# ============================================================================
# 复制此文件为 .env，然后根据实际情况修改值

# ============================================================================
# MySQL 配置
# ============================================================================
MYSQL_ROOT_PASSWORD=root123
MYSQL_DATABASE=resonance
MYSQL_USER=resonance
MYSQL_PASSWORD=resonance123

# ============================================================================
# Grafana 配置
# ============================================================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_ROOT_URL=http://localhost:3000

# ============================================================================
# Gateway 服务配置
# ============================================================================
GATEWAY_SERVER_PORT=8080
GATEWAY_METRICS_PORT=9091
GATEWAY_LOG_LEVEL=info
GATEWAY_MAX_CONNECTIONS=10000

# ============================================================================
# Logic 服务配置
# ============================================================================
LOGIC_SERVER_PORT=9090
LOGIC_METRICS_PORT=9092
LOGIC_LOG_LEVEL=info

# ============================================================================
# Task 服务配置
# ============================================================================
TASK_METRICS_PORT=9093
TASK_LOG_LEVEL=info
TASK_WORKER_NUM=10

# ============================================================================
# Redis 配置
# ============================================================================
REDIS_HOST=resonance-redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_RETRIES=3
REDIS_POOL_SIZE=10

# ============================================================================
# MySQL 数据库连接配置
# ============================================================================
DB_HOST=resonance-mysql
DB_PORT=3306
DB_USER=resonance
DB_PASSWORD=resonance123
DB_NAME=resonance
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=5m

# ============================================================================
# NATS 消息队列配置
# ============================================================================
NATS_URLS=nats://resonance-nats:4222
NATS_MAX_RECONNECTS=3
NATS_RECONNECT_WAIT=100ms

# ============================================================================
# etcd 分布式锁配置
# ============================================================================
ETCD_ENDPOINTS=resonance-etcd:2379
ETCD_DIAL_TIMEOUT=5s

# ============================================================================
# 日志配置
# ============================================================================
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_LEVEL=info

# ============================================================================
# 服务发现与负载均衡配置
# ============================================================================
SERVICE_REGISTRY_ETCD_ENABLED=true
SERVICE_REGISTRY_NAMESPACE=resonance

# ============================================================================
# 性能与监控配置
# ============================================================================
METRICS_ENABLED=true
METRICS_SCRAPE_INTERVAL=15s
PROFILING_ENABLED=false

# ============================================================================
# IM 业务配置
# ============================================================================
# 消息最大长度（字节）
MAX_MESSAGE_SIZE=65536

# 群聊最大成员数
MAX_GROUP_SIZE=10000

# 离线消息保留时间（天）
OFFLINE_MESSAGE_RETENTION_DAYS=30

# 消息发送频率限制（条/秒）
MESSAGE_RATE_LIMIT=100

# WebSocket 心跳间隔（秒）
WEBSOCKET_HEARTBEAT_INTERVAL=30

# 连接超时时间（秒）
CONNECTION_TIMEOUT=300
